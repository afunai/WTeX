!!! このソフトについて

WTeXは、WikiマークアップとTeXマークアップが混在した文書から、LaTeXでタイプセット可能なTeX文書を生成するユーティリティです。段落・見出し・強調・ルビなどのマークアップを、可読性の高いWiki形式で記述し、make一発でTeX→PDFに変換することができます。また、TeXマークアップを混在させることで、高度なレイアウトや数式も表現可能です。

ソース:
|このように、***Wiki***と{\LARGE\bf TeX}の混在した文書《ソース》から、PDFが作れます。

出力:
]このように、***Wiki***と{\LARGE\bf TeX}の混在した文書《ソース》から、PDFが作れます。

※作者本人は、プレーンテキスト→縦書きPDFがやりたかっただけなので、その他の機能はオマケ気味です。それなりに御用心ください。ライセンスにもある通り、完全に無保証です。

!!! インストールと実行

!! 必要条件

WTeXでPDFを出力するには、以下のソフトが必要です。

* Ruby 1.8/1.9
* UTF-8を扱えるLaTeX環境（TeX Live 2010、MacTeXで確認しています）
* GNU互換make

!! インストール

| gem install wtex

!! PDFの作成

適当なディレクトリで、以下を実行します。

| wikitex init my_project

生成されたディレクトリ「my_project」には、以下のファイルがコピーされています。

| Makefile
| body.txt
| head.tex
| tmpl.tex.report
| tmpl.tex.tbook
| out/

最初に、tmpl.tex.*のいずれかをtmpl.texとしてコピーします。tmpl.tex.reportが横書き、tmpl.tex.tbookが縦書きのサンプルです。

| cp -p tmpl.tex.report tmpl.tex

body.txtに、Wiki/TeXマークアップでソースを記述します。head.texには文書タイトルや著者情報が、tmpl.texにはTeX文書の外枠がありますので、これらも必要に応じて適宜編集してください。完成したら、

| make

で、（うまく行けば）ディレクトリ内に「body.tex」および「book.pdf」が生成されます。

!! Ruby からの利用

| require 'rubygems'
| require 'wtex'
|
| wt  = WTeX.new
| tex = wt.tex '***Wiki***{\LARGE\bf TeX}'

!!! マークアップ

!! 段落と改行

段落の区切りは空行（TeXと同じです）。
ただし、TeXと違い、段落内の改行は、そのまま反映されます。

段落頭の字下げは、デフォルトでは手動です。

!! Wikiマークアップ

! 見出し

１〜３ケの「!」を行の頭に置くと、それぞれ小節・節・章の見出しになります。また、「!」の直後に「*」を付けると、連番が出力されなくなります。

ソース:
| !!! 章
| !! 節
| ! 小節
| !* 小節（番号なし）

! 区切り

ハイフン３つ「---」を行の頭に置くと、小節の区切り記号になります。

---

! 強調

２〜４ヶの「*」で文章を囲むと、その範囲が***強調***（デフォルトでは太字＆大文字）されます。「*」を増やすほど、大きな文字になります。

ソース:
| これは****ひどい****。

出力:
] これは****ひどい****。

! 傍点・アンダーライン

２ケの「_」で文章を囲むと、その範囲に__傍点__（横書きの場合、アンダーライン）が適用されます。

ソース:
| これは__ひどい__。

出力:
] これは__ひどい__。

! ルビ

「\verb|ルビ《るび》|」のように記述すると、ルビ《るび》を振ることができます。ルビの適用範囲は自動的に判定されますが、複合語などの場合、「|」記号で区切ることで、部分|指定《してい》も可能です（青空文庫形式に準拠）。

ソース:
| これは酷《ひど》い三|馬鹿《ばか》ですね。

出力:
] これは酷《ひど》い三|馬鹿《ばか》ですね。

! ボックス

行の先頭に「]」記号、または「|」記号を置くと、その行は枠付きボックスとして表示されます。行の直前に「foo.rb:」のようにコロン「:」で終わる行を書くと、ボックスのタイトルとして扱われます。「]」で始まるブロックの内部では、WikiマークアップおよびTeXマークアップが利用可能です。「|」で始まるブロックの内部では、WikiマークアップもTeXマークアップも使用できず、ソースの文字がすべてそのまま表示されます。

ソース:
| foo_bar.tex:
| ]foo,bar,
| ]{\large\bf bar},**baz**

\begin{WTbox}{出力（マークアップが評価される）}
\begin{WTbox}{foo\_{}bar.tex}
foo,bar,\\
{\large\bf bar},{\large\bf baz}
\end{WTbox}
\end{WTbox}

ソース:
| foo_bar.tex:
| |foo,bar,
| |{\large\bf bar},**baz**

\begin{WTbox}{出力（マークアップは評価されない）}
\begin{WTcode}{foo\_{}bar.tex}
foo,bar,
{\large\bf bar},**baz**
\end{WTcode}
\end{WTbox}

! 引用

行の先頭に「>」記号を置くと、その行は引用として扱われます。引用の内部では、WikiマークアップおよびTeXマークアップが利用可能です。

ソース:
| >吾輩は猫である。
| >名前は__まだ無い__。

\begin{WTbox}{出力}
\begin{quote}
吾輩は猫である。\\
名前は\WTunderline{まだ無い}。
\end{quote}
\end{WTbox}

! リスト

行の先頭に「*」または「+」記号を置くと、その行はリストアイテムとして扱われます。「*」は序数なし、「+」だと序数ありです。強調の「\verb|**foo**|」と区別するため、記号とアイテムの間には、必ず空白を入れてください。

ソース:
| * foo
| * bar
| *baz←くっつけて書くとリストにならない

\begin{WTbox}{出力}
\begin{itemize}
\item foo
\item bar
\end{itemize}
*baz←くっつけて書くとリストにならない
\end{WTbox}

リストを入れ子にすることもできます。

ソース:
| + foo
| +* bar
| +* baz
| + qux

\begin{WTbox}{出力}
\begin{enumerate}
\item foo\begin{itemize}
\item bar
\item baz
\end{itemize}

\item qux
\end{enumerate}
\end{WTbox}

! テーブル・表

今のところ、Wikiマークアップはありません。TeXで書きましょう。

!! TeXとの混在

! 特殊記号の自動エスケープ

TeXの特殊記号は、自動的にエスケープされます。「#」「%」「@」などは、そのまま記述可能です。ただし、バックスラッシュ「\verb|\|」・ドル記号「\${}」・中括弧「\verb|{}|」の３種だけは、\verb|\verb|等によるエスケープが必要です。

ソース:
| #, %, &
| \verb|\|, \${}, \verb|{}|

出力:
] #, %, &
] \verb|\|, \${}, \verb|{}|

! TeXコマンド、環境、グルーピング

「\verb|\|」で始まるコマンド、「\verb|\begin{...}...\end{...}|」で指定された環境、「\verb|{...}|」内部のグルーピングは、Wikiをスルーして出力されるので、TeXマークアップをそのまま記述することが可能です。

ソース:
| \verb|***Wiki***|
| \begin{huge}Wiki《るび》\end{huge}
| {\large\bf Wiki$\heartsuit$}

出力:
] \verb|***Wiki***|
] \begin{huge}Wiki《るび》\end{huge}
] {\large\bf Wiki$\heartsuit$}

! 数式モード

「\verb|$|」または「\verb|$$|」で囲まれた内部は、TeXの数式モードとして扱われます。

ソース:
| これはひどい $x^2 + \sqrt{y}$ です。

出力（テキスト数式モード）:
] これはひどい $x^2 + \sqrt{y}$ です。

ソース:
| これはひどい $$x^2 + \sqrt{y}$$ です。

出力（ディスプレイ数式モード）:
] これはひどい $$x^2 + \sqrt{y}$$ です。



!!! ライセンス

配布条件はMITライセンスとします。
詳細は、gem同梱のLICENSEでご確認ください。
